<div class="dragHandler topBar noMaximize black"><process-bar></process-bar><div class="appControls"></div><div ng-click="stepBack()" ng-if="canGoBack()" class="backButton"></div><div ng-if="currentStep.translateTitle" translate="currentStep.translateTitle" class="title"></div><div ng-if="!currentStep.translateTitle" class="title">{{currentStep.title}}</div><div class="actionsPanel"><div ng-click="createTask($event)" class="action"><div class="icon"><img src="/resources/images/desktop/black/createTask.svg"/></div><div translate="'teamManagerApp_createTask'" class="settingsText"></div></div><div ng-class="{'disabled':!currentTeam}" class="action"><div class="icon"><img src="/resources/images/desktop/black/inviteCrewman.svg" ng-click="invite()"/></div><div translate="'teamManagerApp_invite'" ng-click="invite()" class="settingsText"></div></div><div class="action"><div class="icon folder"><img src="/resources/images/desktop/black/createTeam.svg" ng-click="crateTeam()" class="flushMousedown"/></div><div translate="'teamManagerApp_crateTeam'" ng-click="crateTeam()" class="settingsText flushMousedown"></div></div><div class="action"><div class="icon settings"><img src="/resources/images/desktop/actions/black/header-button-settings.svg" ng-click="showMoreMenu($event)" class="flushMousedown"/></div><div translate="'contentApp_more'" ng-click="showMoreMenu($event)" class="settingsText flushMousedown"></div></div></div><div class="switcherPanel"><div ng-class="{'active':myTasks}" class="switcher myTasks"><div class="iconButton"> <div ng-click="triggerMy()" class="code">{{::userCode()}}</div></div><div translate="'teamManagerApp_myTasks'" ng-click="triggerMy()" class="settingsText"></div></div><div ng-class="{'active':showAccepted}" ng-click="triggerAccepted()" class="switcher showAccepted flushMousedown"><div class="iconButton"> <img ng-if="!showAccepted" src="/resources/images/desktop/filters/black/kreezh.svg"/><img ng-if="showAccepted" src="/resources/images/desktop/filters/white/kreezh.svg"/></div><div translate="'teamManagerApp_showAccepted'" class="settingsText"></div></div></div></div><div class="body panelWide withRight"><div scroll-value="teamScrollValue" antiscroll="antiscroll" class="leftPanel itemsContainer zoom_mid lazyTeams rememberScroll"><div ng-class="{'active': currentTeam == null}" ng-click="jumpStep(stepStack[0])" ng-if="!myUser.settings.simpleMode" class="panelItem"><div dropable-item="myUser" class="previewContainer droppableItem"><div item="myUser" class="itemPreview"></div></div></div><div ng-repeat="item in taskTeams | filter:teamFilter | orderBy:teamOrder:true " ng-class="{'active': item == currentTeam}" ng-click="selectTeam(item)" class="panelItem loadFirstTeam"><div ng-class="{'active':item.userUpdated[0].unread || item.userUpdated[0].updates &gt; 0}" class="notify"> <div ng-if="item.userUpdated[0].updates &gt; 0" class="counter">{{item.userUpdated[0].updates}}</div></div><div class="previewContainer droppableItem contextMenu selectableItem"><div item="item" class="itemPreview"></div></div></div></div><div ng-class="{'showSettings':showSettings, 'appSettingsLayout_showed':currentTeam || currentTask}" class="rightContent itemsContainer appSettingsLayout"><div no-effects="no-effects" dropable-item="currentTask" context="currentTeam" class="currentTeam appSettingsLayout_topBar droppableItem"><div class="params"><div ng-click="showSettings = !showSettings" class="settings gearIcon flushMousedown appSettingsLayout_activator"></div><div ng-class="{'chatActive':chatActive}" ng-if="currentTask" class="switcher"><div ng-click="setChat(true)" class="button chat"><img src="/resources/images/desktop/black/chat.svg" class="inactive"/><img src="/resources/images/desktop/black/chat-active.svg" class="active"/></div><div ng-click="setChat(false)" class="button tasks"><img src="/resources/images/desktop/black/list.svg" class="inactive"/><img src="/resources/images/desktop/black/list-active.svg" class="active"/></div></div><div ng-if="isInvited()" class="inviteBlock"><div ng-click="inviteDecline()" class="inviteButton">{{translate('teamManagerApp_invite_decline')}}</div><div ng-click="inviteAccept()" class="inviteButton">{{translate('teamManagerApp_invite_accept')}}</div></div><div ng-if="currentTask" class="taskStatusAction itemActionBlock"></div></div><div class="title"><input ng-if="!currentTask &amp;&amp; currentTeam" ng-model="currentTeam.name" ng-change="saveTeam(currentTeam)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }"/><input ng-if="currentTask" ng-model="currentTask.name" ng-change="saveTask(currentTask)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }" class="inviteFocus"/></div></div><div no-effects="no-effects" dropable-item="currentTask" context="currentTeam" class="teamSettings appSettingsLayout_settings droppableItem"><div ng-if="!currentTask &amp;&amp; currentTeam" class="previewColumn"><div ng-if="isOwner()" translate="" translate-title="'teamManager_team_open_content_description'" class="setting"><div translate="'teamManager_team_open_content'" class="name"></div><checkbox ng-model="currentTeam.openContent" ng-change="saveTeam()" class="long"></checkbox></div><button ng-if="!isOwner()" ng-click="leaveTeam()" translate="'teamManager_leave_team'"></button></div><div ng-if="currentTask" class="taskBounded previewColumn itemsContainer zoom_min multiselect"><div translate="'teamManagerApp_dropItemsHere'" ng-if="currentTask.entities.length == 0" class="dropHere"></div><div ng-repeat="itemData in currentTask.entities | reverse " type="{{itemData.type}}" id="{{itemData.id}}" context="currentTask" class="previewContainer selectableItem editableItem contextMenu droppableItem"><div type="{{itemData.type}}" id="itemData.id" class="itemPreview"></div></div></div><div ng-class="{'disabled':currentTeam.published}" class="paramsColumn"><div class="descriptionContainer"><div translate="'teamManagerApp_description'" class="containerTitle"></div><textarea ng-if="!currentTask &amp;&amp; currentTeam" ng-model="currentTeam.description" ng-change="saveTeam(currentTeam)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }"></textarea><textarea ng-if="currentTask" ng-model="currentTask.description" ng-change="saveTask(currentTask)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }"></textarea></div></div></div><div class="appSettingsLayout_body"><div ng-if="currentTask &amp;&amp; chatActive" class="entityChat"><div scroll-glue="" class="messagesList"><div ng-repeat="message in currentTask.messages" class="chatMessage"><div class="timeInfo">{{::getFormatedDate(message.timestamp)}}</div><div class="userName">{{getUser(message.userId).name}}</div><div class="messageUser"><div type="user" id="message.userId" noname="true" class="itemPreview"></div></div><div class="message">{{::message.text}}</div></div></div><div class="newMessage"><div class="pictureBox"><div type="user" id="account.user.id" noname="true" class="itemPreview"></div></div><div class="newMessageText"><textarea ng-keydown="sendOnEnter($event)" ng-model="newMessage.text" translate="" translate-placeholder="'teamManager_task_enter_message_text'" class="sendOnEnter"> </textarea></div><button ng-click="sendMessage()" translate="'teamManager_task_add_message'" class="sendMessage"></button></div></div><div ng-if="!chatActive || !currentTask" class="blTable tasksList"><div class="head"><div translate="'teamManagerApp_column_taskTitle'" class="cell title"></div><div translate="'teamManagerApp_column_from'" class="cell from"></div><div translate="'teamManagerApp_column_to'" class="cell to"></div><div translate="'teamManagerApp_column_status'" class="cell taskStatus"></div></div><div scroll-value="taskScrollValue" antiscroll="antiscroll" class="list lazyTasks rememberTaskScroll multiselect"><task-item ng-repeat="item in tasks | filter:taskFilter | orderBy:taskOrder:true"></task-item></div></div></div></div><div antiscroll="antiscroll" class="rightPanel multiselect zoom_min itemsContainer"><div ng-repeat="id in users | filter:inTask" type="user" id="{{id}}" context="currentTask || currentTeam" class="previewContainer selectableItem droppableItem contextMenu"><div id="id" type="user" class="itemPreview"></div><div ng-if="currentTeam" translate="'team_role_' + memberRole(id)" class="userRole"></div></div><div ng-if="currentTask &amp;&amp; currentTask.users.length &gt; 0" class="divider"></div><div ng-repeat="id in users | filter:notInTask" type="user" id="{{id}}" context="currentTask || currentTeam" class="previewContainer selectableItem droppableItem contextMenu inactive"><div id="id" type="user" class="itemPreview"></div><div ng-if="currentTeam" translate="'team_role_' + memberRole(id)" class="userRole"></div></div></div></div><bread-crombs></bread-crombs>